<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
	</head>
	<body>
        <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>        
        <script type="importMap">{"imports": {"three": "./node_modules/three/build/three.module.js","three/addons/": "./jsm/"}}</script>


        <script type = "module">
            import * as THREE from './node_modules/three/build/three.module.js';
            import { OrbitControls } from './node_modules/three/examples/jsm/controls/OrbitControls.js';
            import { GLTFLoader } from './node_modules/three/examples/jsm/loaders/GLTFLoader.js';


            let container;
            let camera, scene, renderer, composer;
            let controls;
            let mouseX = 0, mouseY = 0;
            let windowHalfX = window.innerWidth / 2;
            let windowHalfY = window.innerHeight / 2;

            let afterimagePass, bloomPass;

        init();

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/ window.innerHeight,0.1,1000);
            camera.position.x = 0;
            camera.position.y = 1000;
            camera.position.z = 800;

            const loader = new GLTFLoader();
						loader.load( 'models/orange-cake.gltf', function ( gltf ) {
							scene.add( gltf.scene );
						} );
		

            renderer = new THREE.WebGLRenderer( { antialias:true } );
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth,window.innerHeight);
            renderer.toneMappingExposure = 1;
            renderer.outputEncoding = THREE.sRGBEncoding;
            document.body.appendChild(renderer.domElement);

            // window.addEventListener( 'resize', function(){
            //     const width = window.innerwidth;
            //     const height = window.innerHeight;
            //     renderer.setSize(width, height);
            //     camera.aspect = width / height;
            //     camera.updateProjectMatrix();
            // })

                    //controls = new OrbitControls( camera, renderer.domElement );
                    //controls.addEventListener( 'change', renderer ); // use if there is no animation loop
                    //controls.minDistance = 2;
                    //controls.maxDistance = 10;
                   //controls.target.set( 0, 0, - 0.2 );
                    //controls.autoRotate = true;
                    //controls.autoRotateSpeed = 0.5;

                    controls = new OrbitControls( camera, renderer.domElement);
			        controls.target.set(.5,1,0);
			        controls.update();
			        controls.enablePan= false;
			        controls.enableDamping = true;

                    window.addEventListener( 'resize', onWindowResize );

            }
            scene.background = new THREE.Color ( 0xbfe3dd);
        function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth, window.innerHeight );
                composer.render();

            }

        function onDocumentMouseMove( event ) {
                mouseX = ( event.clientX - windowHalfX ) / 2;
                mouseY = ( event.clientY - windowHalfY ) / 2;
            }

        
			function animate() {
				requestAnimationFrame( animate );
			

				
				
				renderer.render( scene, camera );
				renderer.physicallyCorrectLights = true;
				renderer.outputEncoding = THREE.sRGBEncoding;
			};
			animate();

        </script>
	</body>
</html>